<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8"/>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
	<link rel="stylesheet" th:href="@{/css/estilos.css}">
	<link rel="stylesheet" th:href="@{/css/tema_light.css}">
</head>
<body>
	<header>
		<!-- Crear header con logo medcon y botÃ³n de logout-->
		<header 
			<nav th:class="|navbar navbar-expand-lg navbar-${tema} bg-${tema}|">
			  <a class="navbar-brand" href="#">
				<img th:src="@{/img/logo.png}" width="30" height="30" alt="">
				</a>
			  <button class="navbar-toggler" type="button" data-toggle="collapse"
				  data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
				  aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			  </button>
			
			  <div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
				  <li class="nav-item active">
					<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" th:href="@{/lista}" th:text="#{menu.tfgs}"></a>
				  </li>
				</ul>
				
				<!--h2 th:inline="text">[[${#httpServletRequest.remoteUser}]]</h2-->
				<span sec:authorize="isAuthenticated()">
					<form th:action="@{/logout}" method="post">
						<label><span sec:authentication="name"></span></label>
						<!--label> Roles: <span sec:authentication="principal.authorities"></span></label-->
						<button class="btn btn-outline-warning my-2 my-sm-0" type="submit" th:text="#{salir}"></button>
					</form> 
				</span>
	</header>
	<div class="container">
		<div class="card bg-light">
			<div class="card-body">
				<table class="table table-striped">
					<thead>
						<tr>
							<th style="border: 1px solid black;">Paciente</th>
							<th style="border: 1px solid black;">Hora de la cita</th>
							<th style="border: 1px solid black;">Estado</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="Consulta: ${consultas}">
							<td th:text="${Consulta.paciente.nombre} + {Consulta.paciente.apelldios}">Juan Perez</td>
							<td th:text="${Consulta.cita.hora}">10:00</td>
							<th:block th:if="${Consulta.status == 0}">
								<td>ESPERANDO</td>
							</th:block>
							<th:block th:if="${Consulta.status == 1}">
								<td>EN CURSO</td>
							</th:block>
							<th:block th:unless="{Consulta.status == 0} or ${Consulta.status == 1}">
								<td>FINALIZADA</td>
							</th:block>
							<td>
								<div>
									<a href="GestionarHistoriales.html" target="_blank" rel="noopener" class="btn btn-outline-secondary btn-sm">Historial</a>
								    </br></br>
									<a href="GestionarRecetas.html" target="_new" class="btn btn-outline-secondary btn-sm">Recetas</a>
								    </br></br>
									<a href="GestionarPruebas.html" target="_new" class="btn btn-outline-secondary btn-sm">Solicitar prueba</a>
								    </br></br>
									<a href="GestionCitas.html" target="_new" class="btn btn-outline-secondary btn-sm">Nueva cita</a>
								    </br></br>
								</div>
							</td>
							<td>
								<a th:href="@{/llamar/} + ${Consulta.id}" class="btn btn-success" style="font-weight:bold; border: 1px solid black;">LLAMAR</a>
							</td>
							<td>
								<a th:href="@{/finalizar/} + ${Consulta.id}" class="btn btn-primary" style="font-weight:bold; border: 1px solid black;">FINALIZAR</a> 
							</td>	
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</body>
</html>
